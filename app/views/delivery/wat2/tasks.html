{% extends "layouts/main.html" %}
{% set pageName="Tasks" %}

{% block header %}
{% include "/delivery/wat2/partials/header/tasks-selected.html" %}
{% endblock %}

{% set mainClasses = "govuk-main-wrapper-extra-padding-top" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <h1 class="govuk-heading-l" id="main-heading">Tasks</h1>

    <!-- <div class="moj-page-header-actions">
      <div class="moj-page-header-actions__title">
        <h1 class="govuk-heading-l" id="main-heading">Tasks (13)</h1>
      </div>
      <div class="moj-page-header-actions__actions">
        <div class="moj-button-group moj-button-group--inline">
          <a href="/delivery/wat2/pcd/create-task.html" role="button" draggable="false" class="govuk-button govuk-button--secondary" data-module="govuk-button">
            Create a new task
          </a>
        </div>
      </div>
    </div> -->

  </div>

  <div class="govuk-grid-column-one-quarter">
    <div class="tasks-filters">
      <h2 class="govuk-heading-m" id="selected-filters-heading">No filters selected</h2>
      <div id="selected-filters-chips" style="margin-bottom: 16px;"></div>
      <p class="govuk-body" id="clear-filters-wrapper" style="display: none;">
        <a class="govuk-link govuk-link--no-visited-state" href="/delivery/wat2/onb/tasks/clear-filters">Clear filters</a>
      </p>

      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

      <h2 class="govuk-heading-m">Filters</h2>

      <form id="filters-form">
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              Assignee
            </legend>
            <div class="govuk-form-group govuk-!-margin-bottom-2">
              <label class="govuk-label" for="assignee-autocomplete">Find assignee</label>
              <div id="assignee-autocomplete"></div>
            </div>
            <div id="owner-checkboxes-container" class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes" style="display: none;">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-1" name="owner" type="checkbox" value="thompson-sarah" data-label="THOMPSON, Sarah (you)" checked>
                <label class="govuk-label govuk-checkboxes__label" for="owner-1">THOMPSON, Sarah (you)</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-21" name="owner" type="checkbox" value="unassigned" data-label="Unassigned">
                <label class="govuk-label govuk-checkboxes__label" for="owner-21">Unassigned</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-2" name="owner" type="checkbox" value="kumar-priya" data-label="KUMAR, Priya">
                <label class="govuk-label govuk-checkboxes__label" for="owner-2">KUMAR, Priya</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-3" name="owner" type="checkbox" value="bishop-james" data-label="BISHOP, James">
                <label class="govuk-label govuk-checkboxes__label" for="owner-3">BISHOP, James</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-4" name="owner" type="checkbox" value="morrison-claire" data-label="MORRISON, Claire">
                <label class="govuk-label govuk-checkboxes__label" for="owner-4">MORRISON, Claire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-5" name="owner" type="checkbox" value="hayes-michael" data-label="HAYES, Michael">
                <label class="govuk-label govuk-checkboxes__label" for="owner-5">HAYES, Michael</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-6" name="owner" type="checkbox" value="anderson-david" data-label="ANDERSON, David">
                <label class="govuk-label govuk-checkboxes__label" for="owner-6">ANDERSON, David</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-7" name="owner" type="checkbox" value="wright-hannah" data-label="WRIGHT, Hannah">
                <label class="govuk-label govuk-checkboxes__label" for="owner-7">WRIGHT, Hannah</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-8" name="owner" type="checkbox" value="martinez-carlos" data-label="MARTINEZ, Carlos">
                <label class="govuk-label govuk-checkboxes__label" for="owner-8">MARTINEZ, Carlos</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-9" name="owner" type="checkbox" value="johnson-patricia" data-label="JOHNSON, Patricia">
                <label class="govuk-label govuk-checkboxes__label" for="owner-9">JOHNSON, Patricia</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-10" name="owner" type="checkbox" value="chen-michael" data-label="CHEN, Michael">
                <label class="govuk-label govuk-checkboxes__label" for="owner-10">CHEN, Michael</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-11" name="owner" type="checkbox" value="patel-ravi" data-label="PATEL, Ravi">
                <label class="govuk-label govuk-checkboxes__label" for="owner-11">PATEL, Ravi</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-12" name="owner" type="checkbox" value="oconnell-siobhan" data-label="O'CONNELL, Siobhan">
                <label class="govuk-label govuk-checkboxes__label" for="owner-12">O'CONNELL, Siobhan</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-13" name="owner" type="checkbox" value="thompson-robert" data-label="THOMPSON, Robert">
                <label class="govuk-label govuk-checkboxes__label" for="owner-13">THOMPSON, Robert</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-14" name="owner" type="checkbox" value="garcía-luis" data-label="GARCÍA, Luis">
                <label class="govuk-label govuk-checkboxes__label" for="owner-14">GARCÍA, Luis</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-15" name="owner" type="checkbox" value="henderson-louise" data-label="HENDERSON, Louise">
                <label class="govuk-label govuk-checkboxes__label" for="owner-15">HENDERSON, Louise</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-16" name="owner" type="checkbox" value="williams-anna" data-label="WILLIAMS, Anna">
                <label class="govuk-label govuk-checkboxes__label" for="owner-16">WILLIAMS, Anna</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-17" name="owner" type="checkbox" value="stewart-james" data-label="STEWART, James">
                <label class="govuk-label govuk-checkboxes__label" for="owner-17">STEWART, James</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-18" name="owner" type="checkbox" value="lewis-elizabeth" data-label="LEWIS, Elizabeth">
                <label class="govuk-label govuk-checkboxes__label" for="owner-18">LEWIS, Elizabeth</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-19" name="owner" type="checkbox" value="walker-george" data-label="WALKER, George">
                <label class="govuk-label govuk-checkboxes__label" for="owner-19">WALKER, George</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input owner-checkbox" id="owner-20" name="owner" type="checkbox" value="clark-victoria" data-label="CLARK, Victoria">
                <label class="govuk-label govuk-checkboxes__label" for="owner-20">CLARK, Victoria</label>
              </div>
            </div>
          </fieldset>
        </div>

        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              Service
            </legend>
            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input service-checkbox" id="service-1" name="service" type="checkbox" value="universal" data-label="Universal">
                <label class="govuk-label govuk-checkboxes__label" for="service-1">Universal</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input service-checkbox" id="service-2" name="service" type="checkbox" value="enhanced" data-label="Enhanced">
                <label class="govuk-label govuk-checkboxes__label" for="service-2">Enhanced</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input service-checkbox" id="service-3" name="service" type="checkbox" value="rasso" data-label="RASSO">
                <label class="govuk-label govuk-checkboxes__label" for="service-3">RASSO</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input service-checkbox" id="service-4" name="service" type="checkbox" value="bereaved-family" data-label="Bereaved Family Service">
                <label class="govuk-label govuk-checkboxes__label" for="service-4">Bereaved Family Service</label>
              </div>
            </div>
          </fieldset>
        </div>

        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              Area
            </legend>
            <div class="govuk-form-group govuk-!-margin-bottom-2">
              <label class="govuk-label" for="area-autocomplete">Find area</label>
              <div id="area-autocomplete"></div>
            </div>
            <div id="area-selected-container">
            </div>
            <div id="area-checkboxes-container" class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes" style="display: none;">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-1" name="area" type="checkbox" value="avon-somerset" data-label="Avon and Somerset">
                <label class="govuk-label govuk-checkboxes__label" for="area-1">Avon and Somerset</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-2" name="area" type="checkbox" value="bedfordshire" data-label="Bedfordshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-2">Bedfordshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-3" name="area" type="checkbox" value="cambridgeshire" data-label="Cambridgeshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-3">Cambridgeshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-4" name="area" type="checkbox" value="cheshire" data-label="Cheshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-4">Cheshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-5" name="area" type="checkbox" value="cleveland" data-label="Cleveland">
                <label class="govuk-label govuk-checkboxes__label" for="area-5">Cleveland</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-6" name="area" type="checkbox" value="cumbria" data-label="Cumbria">
                <label class="govuk-label govuk-checkboxes__label" for="area-6">Cumbria</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-7" name="area" type="checkbox" value="devon-cornwall" data-label="Devon and Cornwall">
                <label class="govuk-label govuk-checkboxes__label" for="area-7">Devon and Cornwall</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-8" name="area" type="checkbox" value="durham" data-label="Durham">
                <label class="govuk-label govuk-checkboxes__label" for="area-8">Durham</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-9" name="area" type="checkbox" value="dyfed-powys" data-label="Dyfed Powys">
                <label class="govuk-label govuk-checkboxes__label" for="area-9">Dyfed Powys</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-10" name="area" type="checkbox" value="essex" data-label="Essex">
                <label class="govuk-label govuk-checkboxes__label" for="area-10">Essex</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-11" name="area" type="checkbox" value="gloucestershire" data-label="Gloucestershire">
                <label class="govuk-label govuk-checkboxes__label" for="area-11">Gloucestershire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-12" name="area" type="checkbox" value="greater-manchester" data-label="Greater Manchester">
                <label class="govuk-label govuk-checkboxes__label" for="area-12">Greater Manchester</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-13" name="area" type="checkbox" value="gwent" data-label="Gwent">
                <label class="govuk-label govuk-checkboxes__label" for="area-13">Gwent</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-14" name="area" type="checkbox" value="hampshire-iow" data-label="Hampshire and Isle of Wight">
                <label class="govuk-label govuk-checkboxes__label" for="area-14">Hampshire and Isle of Wight</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-15" name="area" type="checkbox" value="hertfordshire" data-label="Hertfordshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-15">Hertfordshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-16" name="area" type="checkbox" value="hmcpsi" data-label="HMCPSI">
                <label class="govuk-label govuk-checkboxes__label" for="area-16">HMCPSI</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-17" name="area" type="checkbox" value="humberside" data-label="Humberside">
                <label class="govuk-label govuk-checkboxes__label" for="area-17">Humberside</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-18" name="area" type="checkbox" value="kent" data-label="Kent">
                <label class="govuk-label govuk-checkboxes__label" for="area-18">Kent</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-19" name="area" type="checkbox" value="lancashire" data-label="Lancashire">
                <label class="govuk-label govuk-checkboxes__label" for="area-19">Lancashire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-20" name="area" type="checkbox" value="leatherhead" data-label="Leatherhead">
                <label class="govuk-label govuk-checkboxes__label" for="area-20">Leatherhead</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-21" name="area" type="checkbox" value="leicestershire" data-label="Leicestershire">
                <label class="govuk-label govuk-checkboxes__label" for="area-21">Leicestershire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-22" name="area" type="checkbox" value="lincolnshire" data-label="Lincolnshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-22">Lincolnshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-23" name="area" type="checkbox" value="london" data-label="London">
                <label class="govuk-label govuk-checkboxes__label" for="area-23">London</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-24" name="area" type="checkbox" value="merseyside" data-label="Merseyside">
                <label class="govuk-label govuk-checkboxes__label" for="area-24">Merseyside</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-25" name="area" type="checkbox" value="norfolk" data-label="Norfolk">
                <label class="govuk-label govuk-checkboxes__label" for="area-25">Norfolk</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-26" name="area" type="checkbox" value="north-wales" data-label="North Wales">
                <label class="govuk-label govuk-checkboxes__label" for="area-26">North Wales</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-27" name="area" type="checkbox" value="north-yorkshire" data-label="North Yorkshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-27">North Yorkshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-28" name="area" type="checkbox" value="northamptonshire" data-label="Northamptonshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-28">Northamptonshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-29" name="area" type="checkbox" value="northumbria" data-label="Northumbria">
                <label class="govuk-label govuk-checkboxes__label" for="area-29">Northumbria</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-30" name="area" type="checkbox" value="nottinghamshire" data-label="Nottinghamshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-30">Nottinghamshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-31" name="area" type="checkbox" value="rmu-area" data-label="Records Management Unit area">
                <label class="govuk-label govuk-checkboxes__label" for="area-31">Records Management Unit area</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-32" name="area" type="checkbox" value="south-wales" data-label="South Wales">
                <label class="govuk-label govuk-checkboxes__label" for="area-32">South Wales</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-33" name="area" type="checkbox" value="south-yorkshire" data-label="South Yorkshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-33">South Yorkshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-34" name="area" type="checkbox" value="stafford" data-label="Stafford">
                <label class="govuk-label govuk-checkboxes__label" for="area-34">Stafford</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-35" name="area" type="checkbox" value="suffolk" data-label="Suffolk">
                <label class="govuk-label govuk-checkboxes__label" for="area-35">Suffolk</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-36" name="area" type="checkbox" value="surrey" data-label="Surrey">
                <label class="govuk-label govuk-checkboxes__label" for="area-36">Surrey</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-37" name="area" type="checkbox" value="sussex" data-label="Sussex">
                <label class="govuk-label govuk-checkboxes__label" for="area-37">Sussex</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-38" name="area" type="checkbox" value="thames-valley" data-label="Thames Valley">
                <label class="govuk-label govuk-checkboxes__label" for="area-38">Thames Valley</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-39" name="area" type="checkbox" value="warwickshire" data-label="Warwickshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-39">Warwickshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-40" name="area" type="checkbox" value="west-mercia" data-label="West Mercia">
                <label class="govuk-label govuk-checkboxes__label" for="area-40">West Mercia</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-41" name="area" type="checkbox" value="west-midlands" data-label="West Midlands">
                <label class="govuk-label govuk-checkboxes__label" for="area-41">West Midlands</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-42" name="area" type="checkbox" value="west-yorkshire" data-label="West Yorkshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-42">West Yorkshire</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input area-checkbox" id="area-43" name="area" type="checkbox" value="wiltshire" data-label="Wiltshire">
                <label class="govuk-label govuk-checkboxes__label" for="area-43">Wiltshire</label>
              </div>
            </div>
          </fieldset>
        </div>

        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
              Task type
            </legend>
            <!-- <div class="govuk-form-group">
              <label class="govuk-label" for="search">Find task</label>
              <input class="govuk-input" id="search" name="search" type="text" />
            </div> -->
            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="assignee-1" name="assignee" type="checkbox" value="assignee-1">
                <label class="govuk-label govuk-checkboxes__label" for="assignee-1">Decision to charge</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="assignee-2" name="assignee" type="checkbox" value="assignee-2">
                <label class="govuk-label govuk-checkboxes__label" for="assignee-2">No further action decision</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="assignee-2" name="assignee" type="checkbox" value="assignee-2">
                <label class="govuk-label govuk-checkboxes__label" for="assignee-2">No further action meeting</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="assignee-2" name="assignee" type="checkbox" value="assignee-2">
                <label class="govuk-label govuk-checkboxes__label" for="assignee-2">Pre-trial meeting</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="assignee-3" name="assignee" type="checkbox" value="assignee-3">
                <label class="govuk-label govuk-checkboxes__label" for="assignee-3">VCL decision</label>
              </div>
              <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" id="assignee-3" name="assignee" type="checkbox" value="assignee-3">
                <label class="govuk-label govuk-checkboxes__label" for="assignee-3">VCL meeting</label>
              </div>
            </div>
          </fieldset>
        </div>
      </form>
    </div>
  </div>

  <div class="govuk-grid-column-one-half">

    <div class="moj-search tasks-filters govuk-!-padding-4 govuk-!-margin-bottom-4">
      <form action="#" method="post">
        <div class="govuk-form-group">

          <label class="govuk-label govuk-label--s" for="search-urn">
            Search by victim or case reference
          </label>
    
          <input type="search" class="govuk-input moj-search__input" id="search-urn" name="searchUrn" autocomplete="" aria-describedby="search-urn-hint" value="{{ data['searchUrn'] }}">
                   
        </div>
    
        <button type="submit" class="govuk-button moj-search__button" data-module="govuk-button">
          Search
        </button>
    
      </form>

      <p class="govuk-body govuk-!-margin-top-2 govuk-!-margin-bottom-0" id="clear-search-wrapper" style="display: none;">
        <a class="govuk-link govuk-link--no-visited-state" href="#" id="clear-search-link">Clear search</a>
      </p>
    </div>

    <p class="govuk-!-font-size-16">
      <b class="govuk-!-margin-right-1">Sort by:</b>
      <span class="">Due date</span>
      <span class="govuk-!-margin-left-1 govuk-!-margin-right-1">|</span>
      <a href="?taskSort=Hearing date">Hearing date</a>
      <span class="govuk-!-margin-left-1 govuk-!-margin-right-1">|</span>
      <a href="?taskSort=PACE">Decision date</a>
      <!-- <span class="govuk-!-margin-left-1 govuk-!-margin-right-1">|</span>
      <a href="?taskSort=Custody time limit">Custody time limit</a>
      <span class="govuk-!-margin-left-1 govuk-!-margin-right-1">|</span>
      <a href="?taskSort=Statutory time limit">Statutory time limit</a> -->
    </p>

    <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
          <a href="/delivery/wat2/victim?success=no" class="govuk-link govuk-link--no-visited-state">DOE, Jane</a><br>54KR1626525
        </dt>
        <dd class="govuk-summary-list__value">
          <span class="govuk-!-font-weight-bold">Inform of decision to charge</span><br>
          <span class="govuk-tag govuk-tag--red govuk-!-margin-top-1 govuk-!-margin-bottom-1">Overdue</span> 13 November 2025
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">
            Check and send<span class="govuk-visually-hidden"> decision to charge email</span>
          </a>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
          <a href="#" class="govuk-link govuk-link--no-visited-state">SMITH, John</a><br>54KR1626525
        </dt>
        <dd class="govuk-summary-list__value">
          <span class="govuk-!-font-weight-bold">Inform of no further action decision</span><br>
          <span class="govuk-tag govuk-tag--pink govuk-!-margin-top-1 govuk-!-margin-bottom-1">Due today</span> 14 November 2025
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">
            Call again at 14:00<span class="govuk-visually-hidden"> of John Smith (54KR1626525)</span>
          </a>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
          <a href="#" class="govuk-link govuk-link--no-visited-state">SMITH, Jackie</a><br>54KR1626525
        </dt>
        <dd class="govuk-summary-list__value">
          <span class="govuk-!-font-weight-bold">Arrange CPS pre-trial meeting</span><br>
          <span class="govuk-tag govuk-tag--pink govuk-!-margin-top-1 govuk-!-margin-bottom-1">Due today</span> 14 November 2025
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">
            View letter and make call<span class="govuk-visually-hidden"> of Jackie Smith (54KR1626525)</span>
          </a>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
          <a href="#" class="govuk-link govuk-link--no-visited-state">JOHNSON, Alice</a><br>54KR1626525/1
        </dt>
        <dd class="govuk-summary-list__value">
          <span class="govuk-!-font-weight-bold">Inform of substantially altered charge (VCL)</span><br>
          Due 17 November 2025
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">
            Amend draft<span class="govuk-visually-hidden"> of Alice Johnson (54KR1626525/1)</span>
          </a>
        </dd>
      </div>
      {% if ((data['pcdStatus'] == "draft-under-review") or (data['pcdStatus'] == "ineligible") or (data['pcdSent'] == "yes")) %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
          <a href="#" class="govuk-link govuk-link--no-visited-state">WIGGINS, Barry</a><br>64KR1626925
        </dt>
        <dd class="govuk-summary-list__value">
          <span class="govuk-!-font-weight-bold">Inform of stopped charge (VCL)</span><br>
          Due 19 November 2025
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link govuk-link--no-visited-state" href="#">
            Amend draft<span class="govuk-visually-hidden"> of Barry Wiggins (64KR1626925)</span>
          </a>
        </dd>
      </div>
      {% else %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
          <a href="/delivery/wat2/victim?success=no" class="govuk-link govuk-link--no-visited-state">{{ data['victimSurname'] | upper }}, {{ data['victimForename'] }}</a><br>{{ data['caseUrn'] }}
        </dt>
        <dd class="govuk-summary-list__value">
          <span class="govuk-!-font-weight-bold">Inform of {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span><br>
          Due 18 November 2025
        </dd>
        <dd class="govuk-summary-list__actions">
          {% if (data['pcdStatus'] == "check-eligibility") %}
            <a href="/delivery/wat2/pcd/pre-draft/check-eligibility" class="govuk-link govuk-link--no-visited-state">
              Check eligibility<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "check-details") %}
            <a href="/delivery/wat2/pcd/pre-draft/check-details" class="govuk-link govuk-link--no-visited-state">
              Check details<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "draft-not-started") %}
            <a href="/delivery/wat2/pcd/draft/pcd-type" class="govuk-link govuk-link--no-visited-state">
              Draft letter<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "draft-in-progress") %}
            <a href="/delivery/wat2/pcd/draft/compose-letter" class="govuk-link govuk-link--no-visited-state">
              Continue draft<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "draft-amendments-required") %}
            <a href="/delivery/wat2/pcd/draft/compose-letter" class="govuk-link govuk-link--no-visited-state">
              Amend draft<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "before-call-1") %}
            <a href="/delivery/wat2/pcd/call/phone-call-1" class="govuk-link govuk-link--no-visited-state">
              View letter and make call<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "after-call-attempt-1") or (data['pcdStatus'] == "after-call-attempt-2") %}
            <a href="/delivery/wat2/pcd/call/next-attempt-moc" class="govuk-link govuk-link--no-visited-state">
              Log another call<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "after-call-attempt-3") %}
            <a href="/delivery/wat2/pcd/draft/compose-letter" class="govuk-link govuk-link--no-visited-state">
              Review and send<span class="govuk-visually-hidden"> letter to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
            </a>

          {% elif (data['pcdStatus'] == "informed-after-call-1") or (data['pcdStatus'] == "informed-after-call-2") or (data['pcdStatus'] == "informed-after-call-3") %}
            {% if (data['pcdFumoc'] == "email") or (data['pcdFumoc'] == "post") %}
              <a href="/delivery/wat2/pcd/draft/compose-letter" class="govuk-link govuk-link--no-visited-state">
                Review and send<span class="govuk-visually-hidden"> letter to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% else %}
              <a href="/delivery/wat2/pcd/draft/compose-letter" class="govuk-link govuk-link--no-visited-state">
                Review and send to CMS<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% endif %}

          {% elif (data['pcdStatus'] == "draft-ready-to-send") %}
            {% if (data['pmoc'] == "") %}
              <a href="/delivery/wat2/pcd/victim-details/preferred-method-of-contact" class="govuk-link govuk-link--no-visited-state">
                Select preferred method of contact<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% else %}
              <a href="/delivery/wat2/pcd/draft/compose-letter" class="govuk-link govuk-link--no-visited-state">
                Review and send<span class="govuk-visually-hidden"> letter to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% endif %}

          {% elif (data['pcdStatus'] == "draft-approved-to-send") %}
            {% if (data['pcdFumoc'] == "email") or (data['pcdAttemptToContactAgain'] == "email") or (data['pmoc'] == "email") %}
              <a href="/delivery/wat2/pcd/send/check-email-details" class="govuk-link govuk-link--no-visited-state">
                  Check details before sending<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% elif (data['pcdFumoc'] == "post") or (data['pcdAttemptToContactAgain'] == "post") or (data['pmoc'] == "post") %}
              <a href="/delivery/wat2/pcd/send/letter-details" class="govuk-link govuk-link--no-visited-state">
                  Log a letter<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% elif (data['pmoc'] == "via-police") %}
              <a href="/delivery/wat2/pcd/send/check-email-details?recipient=oic" class="govuk-link govuk-link--no-visited-state">
                  Check details before sending<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% elif (data['pmoc'] == "via-isva") %}
              <a href="/delivery/wat2/pcd/send/check-email-details?recipient=isva" class="govuk-link govuk-link--no-visited-state">
                  Check details before sending<span class="govuk-visually-hidden"> to inform about the {% if (data['pcdType'] == "dtc") %}decision to charge{% elif (data['pcdType'] == "nfa") %}no further action decision{% else %}pre-charge decision{% endif %}</span>
              </a>
            {% endif %}
          {% else %}
            <p class="govuk-body">No tasks!!</p>
          {% endif %}
        </dd>
      </div>
      {% endif %}
    </dl>

    <dl class="govuk-summary-list govuk-!-margin-top-9">
      <h2 class="govuk-heading-m govuk-!-margin-bottom-0"><a href="#" class="govuk-link govuk-link--no-visited-state">JONES, Oliver A</a></h2>
      <p class="govuk-body govuk-!-margin-bottom-0">42AE4523851</p>
      
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key">Task</dt><dd class="govuk-summary-list__value"><span class="govuk-!-font-weight-bold">Inform of no further action decision</span></dd></div>
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key">Due</dt><dd class="govuk-summary-list__value"><span class="govuk-tag govuk-tag--red">Overdue</span> 13 November 2025</dd></div>
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key">Owner</dt><dd class="govuk-summary-list__value">THOMPSON, Sarah (you)</dd></div>
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key">Assignee</dt><dd class="govuk-summary-list__value">THOMPSON, Sarah (you)<br><a href="#" class="govuk-link">Change<span class="govuk-visually-hidden"> assignee</span></a></dd></div>
      <div class="govuk-summary-list__row"><dt class="govuk-summary-list__key">Next action</dt><dd class="govuk-summary-list__value"><a href="#" class="govuk-link">Finish and send</a></dd></div>
    </dl>

    <nav class="govuk-pagination" aria-label="Pagination">
      <ul class="govuk-pagination__list">
        <li class="govuk-pagination__item govuk-pagination__item--current">
          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1" aria-current="page">
            1
          </a>
        </li>
        <li class="govuk-pagination__item">
          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 2">
            2
          </a>
        </li>
        <li class="govuk-pagination__item">
          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 3">
            3
          </a>
        </li>
      </ul>
      <div class="govuk-pagination__next">
        <a class="govuk-link govuk-pagination__link" href="#" rel="next">
          <span class="govuk-pagination__link-title">
            Next<span class="govuk-visually-hidden"> page</span>
          </span>
          <svg class="govuk-pagination__icon govuk-pagination__icon--next" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">
            <path d="m8.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
          </svg>
        </a>
      </div>
    </nav>

  </div>

  <div class="govuk-grid-column-one-quarter">
      <div class="govuk-!-margin-bottom-6">
          <h2 class="govuk-heading-m">Recently viewed victims</h2>
          <ul class="govuk-list">
              <li>
                  <a href="#" class="govuk-link govuk-link--no-visited-state">MEGSON, Verity</a>
                  <p class="govuk-body govuk-!-margin-top-1">54KR1626789</p>
              </li>
              <li class="govuk-!-margin-top-3">
                  <a href="/delivery/wat2/victim" class="govuk-link govuk-link--no-visited-state">{{ data['victimSurname'] | upper }}, {{ data['victimForename'] }}</a>
                  <p class="govuk-body govuk-!-margin-top-1">{{ data['caseUrn'] }}</p>
              </li>
              <li class="govuk-!-margin-top-3">
                  <a href="#" class="govuk-link govuk-link--no-visited-state">CHEN, Emily</a>
                  <p class="govuk-body govuk-!-margin-top-1">54KR1626791</p>
              </li>
              <li class="govuk-!-margin-top-3">
                  <a href="#" class="govuk-link govuk-link--no-visited-state">WILSON, James</a>
                  <p class="govuk-body govuk-!-margin-top-1">54KR1626792</p>
              </li>
              <li class="govuk-!-margin-top-3">
                  <a href="#" class="govuk-link govuk-link--no-visited-state">MARTINEZ, Lucy</a>
                  <p class="govuk-body govuk-!-margin-top-1">54KR1626793</p>
              </li>
          </ul>
      </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/accessible-autocomplete@2.0.4/dist/accessible-autocomplete.min.js"></script>

<script>
  // Handle clear filters link visibility and functionality
  var clearFiltersLink = document.querySelector('#clear-filters-wrapper a');
  var clearFiltersWrapper = document.getElementById('clear-filters-wrapper');
  var ownerCheckboxes = document.querySelectorAll('.owner-checkbox');
  var areaCheckboxes = document.querySelectorAll('.area-checkbox');
  var serviceCheckboxes = document.querySelectorAll('.service-checkbox');
  var selectedFiltersChips = document.getElementById('selected-filters-chips');
  var selectedFiltersHeading = document.getElementById('selected-filters-heading');
  var applyFiltersBtn = document.getElementById('apply-filters-btn');

  // Function to update clear filters visibility
  function updateClearFiltersVisibility() {
    var hasCheckedFilters = Array.from(ownerCheckboxes).some(function (cb) { return cb.checked; }) ||
                            Array.from(areaCheckboxes).some(function (cb) { return cb.checked; }) ||
                            Array.from(serviceCheckboxes).some(function (cb) { return cb.checked; });
    clearFiltersWrapper.style.display = hasCheckedFilters ? '' : 'none';
    selectedFiltersHeading.textContent = hasCheckedFilters ? 'Selected filters' : 'No filters selected';
  }

  // Show/hide clear filters link based on initial state
  updateClearFiltersVisibility();

  // Handle clear filters link click
  if (clearFiltersLink) {
    clearFiltersLink.addEventListener('click', function(e) {
      e.preventDefault();
      ownerCheckboxes.forEach(function(cb) { cb.checked = false; });
      areaCheckboxes.forEach(function(cb) { cb.checked = false; });
      serviceCheckboxes.forEach(function(cb) { cb.checked = false; });
      renderChips();
      updateClearFiltersVisibility();
    });
  }

  // Render chips
  function renderChips() {
    selectedFiltersChips.innerHTML = '';
    
    function renderChipCategory(checkboxes, heading) {
      var checkedItems = Array.from(checkboxes).filter(function(cb) { return cb.checked; });
      if (checkedItems.length > 0) {
        var h3 = document.createElement('h3');
        h3.className = 'govuk-heading-s govuk-!-margin-top-3';
        h3.style.marginBottom = '8px';
        h3.textContent = heading;
        selectedFiltersChips.appendChild(h3);
        
        checkedItems.forEach(function(checkbox) {
          createChip(checkbox);
        });
      }
    }
    
    renderChipCategory(ownerCheckboxes, 'Assignee');
    renderChipCategory(areaCheckboxes, 'Area');
    renderChipCategory(serviceCheckboxes, 'Service');
    
    updateClearFiltersVisibility();
  }

  // Create a chip element
  function createChip(checkbox) {
    var chip = document.createElement('div');
    chip.className = 'moj-filter-tags__tag';
    chip.style.cssText = 'display: flex; align-items: baseline; background-color: #ffffff; color: #0b0c0c; padding: 5px 10px; margin-right: 5px; margin-bottom: 8px; border: 1px solid #0b0c0c; border-radius: 0;';
    
    var chipText = document.createElement('span');
    chipText.className = 'govuk-body govuk-!-margin-0';
    var label = checkbox.getAttribute('data-label');
    
    chipText.textContent = label;
    
    var removeBtn = document.createElement('button');
    removeBtn.type = 'button';
    removeBtn.setAttribute('aria-label', 'Remove ' + label + ' filter');
    removeBtn.style.cssText = 'background: none; border: none; padding: 0 4px; margin-left: auto; cursor: pointer; color: #0b0c0c; font-weight: normal; font-size: 24px; line-height: 0.8; flex-shrink: 0;';
    removeBtn.textContent = '×';
    
    removeBtn.addEventListener('click', function (e) {
      e.preventDefault();
      checkbox.checked = false;
      // Re-render chips after removing a filter
      renderChips();
    });
    
    chip.appendChild(chipText);
    chip.appendChild(removeBtn);
    selectedFiltersChips.appendChild(chip);
  }

  // Add change event listeners to all checkboxes
  var allFilterCheckboxes = document.querySelectorAll('.owner-checkbox, .area-checkbox, .service-checkbox');
  allFilterCheckboxes.forEach(function(checkbox) {
    checkbox.addEventListener('change', function() {
      renderChips();
    });
  });

  // Render chips on page load

  // Show checked owner items on page load
  ownerCheckboxes.forEach(function (checkbox) {
    if (checkbox.checked) {
      var parentItem = checkbox.closest('.govuk-checkboxes__item');
      if (parentItem) {
        parentItem.style.display = 'flex';
      }
    }
  });

  // Show the owner checkboxes container if there are checked items
  var ownerCheckboxesContainer = document.getElementById('owner-checkboxes-container');
  if (Array.from(ownerCheckboxes).some(function (cb) { return cb.checked; })) {
    ownerCheckboxesContainer.style.display = '';
  }

  // Initialize accessible-autocomplete for assignee (Owner) filter
  function initializeOwnerAutocomplete() {
    var owners = [
      { label: 'THOMPSON, Sarah (you)', value: 'thompson-sarah' },
      { label: 'Unassigned', value: 'unassigned' },
      { label: 'KUMAR, Priya', value: 'kumar-priya' },
      { label: 'BISHOP, James', value: 'bishop-james' },
      { label: 'MORRISON, Claire', value: 'morrison-claire' },
      { label: 'HAYES, Michael', value: 'hayes-michael' },
      { label: 'ANDERSON, David', value: 'anderson-david' },
      { label: 'WRIGHT, Hannah', value: 'wright-hannah' },
      { label: 'MARTINEZ, Carlos', value: 'martinez-carlos' },
      { label: 'JOHNSON, Patricia', value: 'johnson-patricia' },
      { label: 'CHEN, Michael', value: 'chen-michael' },
      { label: 'PATEL, Ravi', value: 'patel-ravi' },
      { label: 'O\'CONNELL, Siobhan', value: 'oconnell-siobhan' },
      { label: 'THOMPSON, Robert', value: 'thompson-robert' },
      { label: 'GARCÍA, Luis', value: 'garcía-luis' },
      { label: 'HENDERSON, Louise', value: 'henderson-louise' },
      { label: 'WILLIAMS, Anna', value: 'williams-anna' },
      { label: 'STEWART, James', value: 'stewart-james' },
      { label: 'LEWIS, Elizabeth', value: 'lewis-elizabeth' },
      { label: 'WALKER, George', value: 'walker-george' },
      { label: 'CLARK, Victoria', value: 'clark-victoria' }
    ];

    var container = document.querySelector('#assignee-autocomplete');
    var ownerCheckboxesContainer = document.getElementById('owner-checkboxes-container');
    var ownerCheckboxes = document.querySelectorAll('.owner-checkbox');

    if (!container) {
      console.error('Assignee autocomplete container not found');
      return;
    }

    if (typeof accessibleAutocomplete === 'undefined') {
      console.error('accessibleAutocomplete library not loaded');
      return;
    }

    var sourceFunction = function(query, populateResults) {
      if (!query) {
        populateResults(owners.map(function(o) { return o.label; }));
      } else {
        var filtered = owners.filter(function(o) {
          return o.label.toLowerCase().indexOf(query.toLowerCase()) !== -1;
        });
        populateResults(filtered.map(function(o) { return o.label; }));
      }
    };

    accessibleAutocomplete({
      element: container,
      id: 'assignee-autocomplete-input',
      source: sourceFunction,
      showAllValues: true,
      minLength: 0,
      confirmOnBlur: true,
      templates: {
        inputValue: function(result) {
          return '';
        },
        suggestion: function(result) {
          return result ? result.label || result : '';
        }
      },
      onConfirm: function (selected) {
        if (!selected) { 
          return; 
        }
        var item = owners.find(function (o) { 
          return o.label === selected || o.label === (selected.label || selected); 
        });
        if (item) {
          ownerCheckboxes.forEach(function (checkbox) {
            if (checkbox.value === item.value) {
              checkbox.checked = true;
              var parentItem = checkbox.closest('.govuk-checkboxes__item');
              if (parentItem) {
                parentItem.style.display = 'flex';
              }
              ownerCheckboxesContainer.style.display = '';
            }
          });
          var input = container.querySelector('input');
          if (input) input.value = '';
        }
      }
    });
  }

  // Initialize accessible-autocomplete for Area filter
  function initializeAreaAutocomplete() {
    var areas = [
      { label: 'Avon and Somerset', value: 'avon-somerset' },
      { label: 'Bedfordshire', value: 'bedfordshire' },
      { label: 'Cambridgeshire', value: 'cambridgeshire' },
      { label: 'Cheshire', value: 'cheshire' },
      { label: 'Cleveland', value: 'cleveland' },
      { label: 'Cumbria', value: 'cumbria' },
      { label: 'Devon and Cornwall', value: 'devon-cornwall' },
      { label: 'Durham', value: 'durham' },
      { label: 'Dyfed Powys', value: 'dyfed-powys' },
      { label: 'Essex', value: 'essex' },
      { label: 'Gloucestershire', value: 'gloucestershire' },
      { label: 'Greater Manchester', value: 'greater-manchester' },
      { label: 'Gwent', value: 'gwent' },
      { label: 'Hampshire and Isle of Wight', value: 'hampshire-iow' },
      { label: 'Hertfordshire', value: 'hertfordshire' },
      { label: 'HMCPSI', value: 'hmcpsi' },
      { label: 'Humberside', value: 'humberside' },
      { label: 'Kent', value: 'kent' },
      { label: 'Lancashire', value: 'lancashire' },
      { label: 'Leatherhead', value: 'leatherhead' },
      { label: 'Leicestershire', value: 'leicestershire' },
      { label: 'Lincolnshire', value: 'lincolnshire' },
      { label: 'London', value: 'london' },
      { label: 'Merseyside', value: 'merseyside' },
      { label: 'Norfolk', value: 'norfolk' },
      { label: 'North Wales', value: 'north-wales' },
      { label: 'North Yorkshire', value: 'north-yorkshire' },
      { label: 'Northamptonshire', value: 'northamptonshire' },
      { label: 'Northumbria', value: 'northumbria' },
      { label: 'Nottinghamshire', value: 'nottinghamshire' },
      { label: 'Records Management Unit area', value: 'rmu-area' },
      { label: 'South Wales', value: 'south-wales' },
      { label: 'South Yorkshire', value: 'south-yorkshire' },
      { label: 'Stafford', value: 'stafford' },
      { label: 'Suffolk', value: 'suffolk' },
      { label: 'Surrey', value: 'surrey' },
      { label: 'Sussex', value: 'sussex' },
      { label: 'Thames Valley', value: 'thames-valley' },
      { label: 'Warwickshire', value: 'warwickshire' },
      { label: 'West Mercia', value: 'west-mercia' },
      { label: 'West Midlands', value: 'west-midlands' },
      { label: 'West Yorkshire', value: 'west-yorkshire' },
      { label: 'Wiltshire', value: 'wiltshire' }
    ];

    var container = document.querySelector('#area-autocomplete');
    var areaCheckboxesContainer = document.getElementById('area-checkboxes-container');
    var areaCheckboxes = document.querySelectorAll('.area-checkbox');

    if (!container) {
      console.error('Area autocomplete container not found');
      return;
    }

    if (typeof accessibleAutocomplete === 'undefined') {
      console.error('accessibleAutocomplete library not loaded');
      return;
    }

    accessibleAutocomplete({
      element: container,
      id: 'area-autocomplete-input',
      source: areas.map(function (a) { return a.label; }),
      showAllValues: true,
      minLength: 0,
      confirmOnBlur: true,
      onConfirm: function (selected) {
        if (!selected) { 
          return; 
        }
        var item = areas.find(function (a) { return a.label === selected; });
        if (item) {
          areaCheckboxes.forEach(function (checkbox) {
            if (checkbox.value === item.value) {
              checkbox.checked = true;
              areaCheckboxesContainer.style.display = '';
              var input = container.querySelector('input');
              if (input) input.value = '';
            }
          });
        }
      }
    });
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      initializeAreaAutocomplete();
      initializeOwnerAutocomplete();
    });
  } else {
    initializeAreaAutocomplete();
    initializeOwnerAutocomplete();
  }
</script>
{% endblock %}